<!DOCTYPE html>
<html>
  <body onload="pageLoaded()">
    <h1>Hello World!</h1>

    <div>A shareholder is a</div>
    <input id="q1" />
    
    <div>A revenue is</div>
    <input id="q2" />
    
    <button onclick="handleSave()">Copy To Clipboard</button>
   
    
    <script>
      function pageLoaded() {
        
        console.log("Body Loaded");
        
        // Get the params from the query string
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        
        // Display the params from the querystring
        console.log(params);

        // populate the form fields
        const q1 = document.getElementById("q1");
        q1.value = params["q1"] || "";
        
        const q2 = document.getElementById("q2");
        q2.value = params["q2"] || "";
        
      }
    </script>

    <script>
      function handleSave() {
        // Get Form Values
        const q1Value = document.getElementById("q1").value;
        
        // 
        const q2Value = document.getElementById("q2").value;
        
        // Build the URL
        let URL = `${window.location.protocol}//${window.location.host}/StudyBusinessSupport/index.html?q1=${q1Value}&q2=${q2Value}`;
        URL = encodeURI(URL);
        
        // display the link to console to debug
        console.log(URL)
        
        /* Copy the link to the clipboard */
        navigator.clipboard.writeText(URL);
      }
    </script>
  </body>
</html>
